var AttachmentRevisions=AttachmentRevisions||{},AttachmentRevisions=AttachmentRevisions||{};AttachmentRevisions.MediaUpload=function(t){function e(){t(document).on("click",'[data-attachment-revisions-action="swap-media"]',function(t){t.preventDefault(),this.openUploader()}.bind(this))}var i=null;return e.prototype.openUploader=function(){if(i)return void i.open();var e=wp.media.query({orderby:"date",query:!0,type:"image",uploadedTo:-1});i=wp.media.frames.fileUploader=wp.media({title:"Media swapper",button:{text:"Swap"},multiple:!1,states:[new wp.media.controller.Library({library:e})]}),i.on("select",function(){var e=i.state().get("selection").first().toJSON(),n={action:"attachment_revisions_swap",id:attachment_revisions_current_post_id,file:e};t.post(ajaxurl,n,function(t){return"success"==t?void location.reload():(alert(t+". Aborting."),!1)})}),i.open(),t(".media-router a:first-of-type").trigger("click")},new e}(jQuery);